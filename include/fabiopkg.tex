\usepackage{dirtree} % Directory tree
\usepackage{enumitem} % Align description list
\setcounter{secnumdepth}{3} % Set numbering for subsubsections too
\usepackage{longtable} % Long table is long
\usepackage{multirow} % Multirow cell in table
%~ \usepackage[T1]{fontenc} % Pretty underscore
\usepackage{footmisc} % Multiple references to same footnote
\usepackage[labelfont=bf,parindent=1em]{caption} % Prettier caption
\usepackage{fancyvrb} % To display code
\usepackage{relsize}  % To resize the code font

% ScheMoTeX preamble
\import{schemotex.utils}
\schemoSetDir{\includeDir}
\import{schemotex.preamble.full}

% Code preamble
%~ \usepackage{DejaVuSansMono}
%~ \usepackage{sourcecodepro}
%~ \usepackage{lmodern}
%~ \usepackage{courier}
%~ \usepackage{inconsolata}
%~ \import{style-code-default}
%~ \import{style-code-bw}
%~ \import{style-code-friendly}
%~ \import{style-code-borland}
%~ \import{style-code-manni}
%~ \import{style-code-trac}
%~ \import{style-code-native}
\import{style-code-lovelace}

\makeatletter

% Control vertical space between Verbatim blocks by using
% the \fanctvrbtopsep and \fancyvrbpartopsep lengths
\newlength{\fancyvrbtopsep}
\newlength{\fancyvrbpartopsep}
\FV@AddToHook{\FV@ListParameterHook}{\topsep=\fancyvrbtopsep\partopsep=\fancyvrbpartopsep}

% Save default value
\let\fancyvrbtopsep@\fancyvrbtopsep
\let\fancyvrbpartopsep@\fancyvrbpartopsep

% Define custom environment CodeSnippet
\DefineVerbatimEnvironment{CodeSnippet@}{Verbatim}
{
numbersep=0pt,
frame=single,
tabsize=1,
fontfamily=DejaVuSansMono-TLF,
fontsize=\relsize{-1},
%~ ,showtabs=true
}
\newenvironment{CodeSnippet}
{%
  \VerbatimEnvironment
  % Remove vertical space
  \setlength{\fancyvrbtopsep}{0pt}
  \setlength{\fancyvrbpartopsep}{0pt}
  \CodeSnippet@%
}
{%Restore default vertical space
  \setlength{\fancyvrbtopsep}{\fancyvrbtopsep@}
  \setlength{\fancyvrbpartopsep}{\fancyvrbpartopsep@}
  \endCodeSnippet@%
}
\makeatother

% Bigger line numbers
\renewcommand{\theFancyVerbLine}{%
  {\ttfamily\normalsize\arabic{FancyVerbLine}}
}
%~ \renewcommand{\FancyVerbTab}{\rule{.1pt}{1ex}}
%~ \renewcommand{\FancyVerbFormatLine}[1]{%
  %~ {\underline{#1\hspace*{\fill}}%
%~ }


\usepackage[hidelinks]{hyperref} % includes \autoref

% Nicer references to (sub)subsections and appendices
\def\?#1{}
\addto\extrasenglish{
  \def\subsectionautorefname{\?}
  \def\subsubsectionautorefname{\?}
  \def\Appendixautorefname{Appendix}
}
